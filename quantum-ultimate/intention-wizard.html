<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  <meta name="theme-color" content="#0a0e27">
  <title>Intention Wizard - Quantum Reality Code</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --neon-cyan: #00f5ff;
      --neon-magenta: #ff00ff;
      --neon-gold: #ffd700;
      --neon-purple: #9d00ff;
      --bg-dark: #0a0a0f;
      --bg-card: rgba(30, 30, 50, 0.9);
      --text-primary: #fff;
      --text-secondary: rgba(255,255,255,0.7);
      --glow-cyan: 0 0 20px rgba(0,245,255,0.5);
      --glow-magenta: 0 0 20px rgba(255,0,255,0.5);
    }
    
    body {
      font-family: 'Exo 2', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    /* Animated Background */
    .quantum-bg {
      position: fixed;
      inset: 0;
      z-index: -1;
      background: 
        radial-gradient(ellipse 80% 50% at 50% 0%, rgba(157,0,255,0.15) 0%, transparent 60%),
        radial-gradient(ellipse 60% 40% at 80% 20%, rgba(0,245,255,0.1) 0%, transparent 50%),
        radial-gradient(ellipse 60% 40% at 20% 80%, rgba(255,0,255,0.1) 0%, transparent 50%),
        linear-gradient(180deg, #0a0a0f 0%, #1a0a2e 100%);
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100vh;
    }
    
    /* Header */
    .wizard-header {
      text-align: center;
      padding: 30px 0 20px;
    }
    
    .wizard-header h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }
    
    .wizard-header p {
      color: var(--text-secondary);
      font-size: 0.95rem;
    }
    
    /* Progress Bar */
    .progress-container {
      margin-bottom: 30px;
    }
    
    .progress-bar {
      height: 6px;
      background: rgba(255,255,255,0.1);
      border-radius: 3px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--neon-cyan), var(--neon-magenta));
      border-radius: 3px;
      transition: width 0.5s ease;
    }
    
    .progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 8px;
    }
    
    /* Step Container */
    .step {
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    .step.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Guide Message */
    .guide-message {
      background: var(--bg-card);
      border: 1px solid rgba(0,245,255,0.2);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      position: relative;
    }
    
    .guide-avatar {
      position: absolute;
      top: -20px;
      left: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: var(--glow-cyan);
    }
    
    .guide-name {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
      color: var(--neon-cyan);
      margin-bottom: 12px;
      margin-top: 15px;
    }
    
    .guide-text {
      font-size: 1.1rem;
      line-height: 1.6;
      color: var(--text-primary);
    }
    
    .guide-text .highlight {
      color: var(--neon-gold);
      font-weight: 600;
    }
    
    /* Question Styles */
    .question-label {
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem;
      color: var(--neon-cyan);
      margin-bottom: 16px;
      display: block;
    }
    
    /* Domain Cards */
    .domain-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .domain-card {
      background: var(--bg-card);
      border: 2px solid transparent;
      border-radius: 12px;
      padding: 20px 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .domain-card:hover {
      border-color: rgba(0,245,255,0.5);
      transform: translateY(-2px);
    }
    
    .domain-card.selected {
      border-color: var(--neon-cyan);
      background: rgba(0,245,255,0.1);
      box-shadow: var(--glow-cyan);
    }
    
    .domain-icon {
      font-size: 2rem;
      margin-bottom: 8px;
    }
    
    .domain-name {
      font-size: 0.85rem;
      font-weight: 600;
    }
    
    /* Text Input */
    .intention-input {
      width: 100%;
      min-height: 120px;
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(0,245,255,0.3);
      border-radius: 12px;
      padding: 16px;
      color: var(--text-primary);
      font-family: 'Exo 2', sans-serif;
      font-size: 1rem;
      resize: none;
      transition: all 0.3s ease;
    }
    
    .intention-input:focus {
      outline: none;
      border-color: var(--neon-cyan);
      box-shadow: var(--glow-cyan);
    }
    
    .intention-input::placeholder {
      color: rgba(255,255,255,0.4);
    }
    
    /* AI Suggestions */
    .ai-suggestions {
      margin-top: 16px;
    }
    
    .ai-suggestions-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .ai-suggestions-label::before {
      content: '‚ú®';
    }
    
    .suggestion-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .suggestion-chip {
      background: rgba(255,0,255,0.1);
      border: 1px solid rgba(255,0,255,0.3);
      border-radius: 20px;
      padding: 8px 14px;
      font-size: 0.85rem;
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .suggestion-chip:hover {
      background: rgba(255,0,255,0.2);
      border-color: var(--neon-magenta);
    }
    
    /* Emotion Tags */
    .emotion-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .emotion-tag {
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 25px;
      padding: 10px 20px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .emotion-tag:hover {
      border-color: rgba(255,215,0,0.5);
    }
    
    .emotion-tag.selected {
      border-color: var(--neon-gold);
      background: rgba(255,215,0,0.15);
      color: var(--neon-gold);
    }
    
    /* Obstacle Cards */
    .obstacle-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .obstacle-item {
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(255,255,255,0.15);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .obstacle-item:hover {
      border-color: rgba(255,0,255,0.4);
    }
    
    .obstacle-item.selected {
      border-color: var(--neon-magenta);
      background: rgba(255,0,255,0.1);
    }
    
    .obstacle-icon {
      font-size: 1.5rem;
      width: 40px;
      text-align: center;
    }
    
    .obstacle-text {
      flex: 1;
    }
    
    .obstacle-name {
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .obstacle-desc {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    /* Power Moment */
    .power-moment-example {
      background: rgba(255,215,0,0.1);
      border-left: 3px solid var(--neon-gold);
      border-radius: 0 8px 8px 0;
      padding: 12px 16px;
      margin-top: 12px;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }
    
    /* Timeline Options */
    .timeline-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .timeline-option {
      background: var(--bg-card);
      border: 2px solid transparent;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .timeline-option:hover {
      border-color: rgba(0,245,255,0.4);
    }
    
    .timeline-option.selected {
      border-color: var(--neon-cyan);
      background: rgba(0,245,255,0.1);
    }
    
    .timeline-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: var(--neon-cyan);
      margin-bottom: 4px;
    }
    
    .timeline-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    
    /* Navigation Buttons */
    .nav-buttons {
      display: flex;
      gap: 12px;
      margin-top: 30px;
    }
    
    .btn {
      flex: 1;
      padding: 16px 24px;
      border-radius: 12px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-back {
      background: transparent;
      border: 2px solid rgba(255,255,255,0.3);
      color: var(--text-secondary);
    }
    
    .btn-back:hover {
      border-color: var(--text-primary);
      color: var(--text-primary);
    }
    
    .btn-next {
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
      border: none;
      color: #000;
    }
    
    .btn-next:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0,245,255,0.4);
    }
    
    .btn-next:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Final Summary */
    .blueprint-summary {
      background: var(--bg-card);
      border: 2px solid var(--neon-cyan);
      border-radius: 16px;
      padding: 24px;
    }
    
    .blueprint-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.2rem;
      text-align: center;
      margin-bottom: 20px;
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .blueprint-section {
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .blueprint-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--neon-magenta);
      margin-bottom: 6px;
    }
    
    .blueprint-value {
      font-size: 1rem;
      color: var(--text-primary);
    }
    
    .quantum-code-preview {
      background: linear-gradient(135deg, rgba(0,245,255,0.1), rgba(255,0,255,0.1));
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      margin-top: 20px;
    }
    
    .code-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-bottom: 10px;
    }
    
    .code-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      color: var(--neon-gold);
      text-shadow: 0 0 20px rgba(255,215,0,0.5);
      letter-spacing: 3px;
    }
    
    .code-frequency {
      font-size: 0.9rem;
      color: var(--neon-cyan);
      margin-top: 8px;
    }
    
    /* Identity Lock Screen */
    .identity-statement {
      background: linear-gradient(135deg, rgba(0,245,255,0.1), rgba(255,0,255,0.1));
      border: 2px solid var(--neon-cyan);
      border-radius: 16px;
      padding: 30px 24px;
      text-align: center;
      margin-bottom: 24px;
    }
    
    .identity-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 16px;
    }
    
    .identity-text {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.3rem;
      line-height: 1.5;
      color: var(--neon-gold);
    }
    
    /* Affirmation Practice */
    .affirmation-box {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 24px;
      margin-top: 20px;
    }
    
    .affirmation-instruction {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 16px;
      text-align: center;
    }
    
    .affirmation-text {
      font-size: 1.2rem;
      text-align: center;
      color: var(--text-primary);
      line-height: 1.6;
      font-style: italic;
    }
    
    .speak-btn {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
      border: none;
      margin: 24px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 2rem;
    }
    
    .speak-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 40px rgba(0,245,255,0.5);
    }
    
    .speak-btn.recording {
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(0,245,255,0.5); }
      50% { transform: scale(1.1); box-shadow: 0 0 50px rgba(255,0,255,0.7); }
    }
    
    /* Council Assignment */
    .council-preview {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 20px;
    }
    
    .council-member-mini {
      text-align: center;
    }
    
    .council-avatar-mini {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--neon-purple), var(--neon-magenta));
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 6px;
      font-size: 1.3rem;
    }
    
    .council-name-mini {
      font-size: 0.7rem;
      color: var(--text-secondary);
      line-height: 1.2;
    }
    
    /* Special Screens */
    .welcome-screen {
      text-align: center;
      padding: 40px 0;
    }
    
    .welcome-icon {
      font-size: 4rem;
      margin-bottom: 24px;
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .welcome-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      margin-bottom: 16px;
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .welcome-text {
      font-size: 1.1rem;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 30px;
    }
    
    /* Reframe Assistant */
    .reframe-box {
      background: rgba(255,0,255,0.1);
      border: 1px solid rgba(255,0,255,0.3);
      border-radius: 12px;
      padding: 16px;
      margin-top: 16px;
    }
    
    .reframe-label {
      font-size: 0.8rem;
      color: var(--neon-magenta);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .reframe-original {
      font-size: 0.9rem;
      color: var(--text-secondary);
      text-decoration: line-through;
      margin-bottom: 8px;
    }
    
    .reframe-new {
      font-size: 1rem;
      color: var(--text-primary);
    }
    
    /* Home link */
    .home-link {
      display: block;
      text-align: center;
      color: var(--text-secondary);
      text-decoration: none;
      margin-top: 20px;
      font-size: 0.9rem;
    }
    
    .home-link:hover {
      color: var(--neon-cyan);
    }
  </style>
</head>
<body>
  <div class="quantum-bg"></div>
  
  <div class="container">
    <div class="wizard-header">
      <h1>‚ú® Intention Wizard ‚ú®</h1>
      <p>Let's craft your quantum manifestation blueprint together</p>
      
      <!-- Progress Bar -->
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
        </div>
        <div class="progress-text">
          <span id="stepLabel">Getting Started</span>
          <span id="stepCount">Step 0 of 8</span>
        </div>
      </div>
    </div>
    
    <!-- STEP 0: Welcome -->
    <div class="step active" id="step-0">
      <div class="welcome-screen">
        <div class="welcome-icon">üîÆ</div>
        <h2 class="welcome-title">The Council Awaits</h2>
        <p class="welcome-text">
          Welcome, Quantum Operator. You're about to create a powerful 
          <span style="color: var(--neon-gold);">Manifestation Blueprint</span> ‚Äî 
          a precise energetic signal that the universe will recognize and respond to.
          <br><br>
          This isn't just typing a wish. We'll help you <strong>crystallize your intention</strong>, 
          <strong>clear your blocks</strong>, and <strong>lock in your new identity</strong>.
        </p>
        <div class="guide-message" style="text-align: left;">
          <div class="guide-avatar">üßô</div>
          <div class="guide-name">QUANTUM MERLIN</div>
          <div class="guide-text">
            "Before the code can be generated, the intention must be <span class="highlight">crystal clear</span>. 
            A vague desire creates a scattered frequency. A precise vision creates a <span class="highlight">quantum lock</span>. 
            Let me guide you through the process."
          </div>
      </div>
      <div class="nav-buttons">
        <button class="btn btn-next" type="button" onclick="console.log('Button clicked!'); nextStep(); return false;">
          Begin the Process ‚ö°
        </button>
      </div>
    </div>
    
    <!-- STEP 1: Domain Selection -->
    <div class="step" id="step-1">
      <div class="guide-message">
        <div class="guide-avatar">üåπ</div>
        <div class="guide-name">QUANTUM ROSE</div>
        <div class="guide-text">
          "Which area of your life is <span class="highlight">calling for transformation</span>? 
          Don't think too hard ‚Äî your heart already knows where the energy wants to flow."
        </div>
      </div>
      
      <label class="question-label">Choose Your Manifestation Domain</label>
      
      <div class="domain-grid">
        <div class="domain-card" data-domain="abundance" onclick="selectDomain(this)">
          <div class="domain-icon">üí∞</div>
          <div class="domain-name">Wealth & Abundance</div>
        </div>
        <div class="domain-card" data-domain="love" onclick="selectDomain(this)">
          <div class="domain-icon">üíï</div>
          <div class="domain-name">Love & Relationships</div>
        </div>
        <div class="domain-card" data-domain="career" onclick="selectDomain(this)">
          <div class="domain-icon">üöÄ</div>
          <div class="domain-name">Career & Purpose</div>
        </div>
        <div class="domain-card" data-domain="health" onclick="selectDomain(this)">
          <div class="domain-icon">üí™</div>
          <div class="domain-name">Health & Vitality</div>
        </div>
        <div class="domain-card" data-domain="spiritual" onclick="selectDomain(this)">
          <div class="domain-icon">üßò</div>
          <div class="domain-name">Spiritual Growth</div>
        </div>
        <div class="domain-card" data-domain="confidence" onclick="selectDomain(this)">
          <div class="domain-icon">üëë</div>
          <div class="domain-name">Confidence & Identity</div>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button class="btn btn-next" id="step1Next" onclick="nextStep()" disabled>Continue ‚Üí</button>
      </div>
    </div>
    <div class="step" id="step-2">
      <div class="guide-message">
        <div class="guide-avatar">üßô</div>
        <div class="guide-name">QUANTUM MERLIN</div>
        <div class="guide-text">
          "Now, speak your desire <span class="highlight">as if it's already happening</span>. 
          Not 'I want' but 'I am' or 'I have'. The quantum field responds to <span class="highlight">certainty</span>, not hope."
        </div>
      </div>
      
      <label class="question-label">What specific outcome is already taking form?</label>
      
      <textarea 
        class="intention-input" 
        id="specificOutcome"
        placeholder="Write in present tense, as if it's happening now...

Example: 'I am earning $10,000/month from my coaching business. I have 15 aligned clients who value my work.'"
        oninput="checkStep2()"
      ></textarea>
      
      <div class="ai-suggestions" id="outcomeSuggestions">
        <div class="ai-suggestions-label">Need help? Try one of these:</div>
        <div class="suggestion-chips" id="outcomeChips">
          <!-- Dynamically populated based on domain -->
        </div>
      </div>
      
      <div class="reframe-box" id="reframeBox" style="display: none;">
        <div class="reframe-label">‚ö° Quantum Reframe</div>
        <div class="reframe-original" id="reframeOriginal"></div>
        <div class="reframe-new" id="reframeNew"></div>
      </div>
      
      <div class="nav-buttons">
        <button class="btn btn-back" onclick="prevStep()">‚Üê Back</button>
        <button class="btn btn-next" id="step2Next" onclick="nextStep()" disabled>Continue ‚Üí</button>
      </div>
    </div>
    
    <!-- STEP 3: Vision Lock -->
    <div class="step" id="step-3">
      <div class="guide-message">
        <div class="guide-avatar">üåπ</div>
        <div class="guide-name">QUANTUM ROSE</div>
        <div class="guide-text">
          "Close your eyes for a moment. See yourself <span class="highlight">already living this reality</span>. 
          What does your day look like? What's <span class="highlight">different</span> about how you feel?"
        </div>
      </div>
      
      <label class="question-label">Describe your vision in vivid detail</label>
      
      <textarea 
        class="intention-input" 
        id="visionDetail"
        placeholder="Paint the picture of your manifested reality...

What do you see when you wake up? How do you feel throughout the day? What no longer bothers you?"
        oninput="checkStep3()"
      ></textarea>
      
      <div class="power-moment-example">
        <strong>üí° Vision Tip:</strong> The more specific your sensory details (what you see, hear, feel), 
        the stronger your quantum signal.
      </div>
      
      <div class="nav-buttons">
        <button class="btn btn-back" onclick="prevStep()">‚Üê Back</button>
        <button class="btn btn-next" id="step3Next" onclick="nextStep()" disabled>Continue ‚Üí</button>
      </div>
    </div>
    
    <!-- STEP 4: Emotional Drivers -->
    <div class="step" id="step-4">
      <div class="guide-message">
        <div class="guide-avatar">üßô</div>
        <div class="guide-name">QUANTUM MERLIN</div>
        <div class="guide-text">
          "Emotion is the <span class="highlight">carrier wave</span> of your intention. 
          What does this outcome <span class="highlight">unlock</span> for you emotionally? 
          Select all that resonate."
        </div>
      </div>
      
      <label class="question-label">What emotions will this manifestation bring?</label>
      
      <div class="emotion-tags">
        <div class="emotion-tag" onclick="toggleEmotion(this)">üîì Freedom</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">üõ°Ô∏è Security</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">‚ú® Confidence</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">üíï Love</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">‚òÆÔ∏è Peace</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">üéØ Purpose</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">üéâ Joy</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">‚ö° Power</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">üåü Recognition</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">ü§ù Connection</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">üèÜ Achievement</div>
        <div class="emotion-tag" onclick="toggleEmotion(this)">üïäÔ∏è Relief</div>
      </div>
      
    <!-- STEP 5: Obstacles / Blocks -->
    <div class="step" id="step-5">
      <div class="guide-message">
        <div class="guide-avatar">üåπ</div>
        <div class="guide-name">QUANTUM ROSE</div>
        <div class="guide-text">
          "Now let's <span class="highlight">clear the path</span>. What beliefs, fears, or patterns 
          have been blocking you? Don't hide from them ‚Äî <span class="highlight">naming them removes their power</span>."
        </div>
      </div>
      
      <label class="question-label">Select any blocks you recognize in yourself</label>
      
      <div class="obstacle-list">
        <div class="obstacle-item" onclick="toggleObstacle(this)" data-obstacle="doubt">
          <div class="obstacle-icon">üò∞</div>
          <div class="obstacle-text">
            <div class="obstacle-name">Doubt & Fear</div>
            <div class="obstacle-desc">"What if it doesn't work? What if I'm not enough?"</div>
          </div>
        </div>
        <div class="obstacle-item" onclick="toggleObstacle(this)" data-obstacle="perfectionism">
          <div class="obstacle-icon">‚è≥</div>
          <div class="obstacle-text">
            <div class="obstacle-name">Perfectionism & Delay</div>
            <div class="obstacle-desc">"I need to be more prepared before I can start."</div>
          </div>
        </div>
        <div class="obstacle-item" onclick="toggleObstacle(this)" data-obstacle="comparison">
          <div class="obstacle-icon">üëÄ</div>
          <div class="obstacle-text">
            <div class="obstacle-name">Comparison</div>
            <div class="obstacle-desc">"Others are already there. I'm behind."</div>
          </div>
        </div>
        <div class="obstacle-item" onclick="toggleObstacle(this)" data-obstacle="unworthiness">
          <div class="obstacle-icon">üíî</div>
          <div class="obstacle-text">
            <div class="obstacle-name">Unworthiness</div>
            <div class="obstacle-desc">"I don't deserve this. Who am I to have this?"</div>
          </div>
        </div>
        <div class="obstacle-item" onclick="toggleObstacle(this)" data-obstacle="self-sabotage">
          <div class="obstacle-icon">üîÑ</div>
          <div class="obstacle-text">
            <div class="obstacle-name">Self-Sabotage</div>
            <div class="obstacle-desc">"I get close then mess it up somehow."</div>
          </div>
        </div>
        <div class="obstacle-item" onclick="toggleObstacle(this)" data-obstacle="overwhelm">
          <div class="obstacle-icon">üòµ</div>
          <div class="obstacle-text">
            <div class="obstacle-name">Overwhelm & Anxiety</div>
            <div class="obstacle-desc">"It's too much. I don't know where to start."</div>
          </div>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button class="btn btn-back" onclick="prevStep()">‚Üê Back</button>
        <button class="btn btn-next" onclick="nextStep()">Continue ‚Üí</button>
      </div>
    </div>
    
    <!-- STEP 6: Power Moment -->
    <div class="step" id="step-6">
      <div class="guide-message">
        <div class="guide-avatar">üßô</div>
        <div class="guide-name">QUANTUM MERLIN</div>
        <div class="guide-text">
          "I need to anchor you in your <span class="highlight">power frequency</span>. 
          Think of a moment when you felt <span class="highlight">absolutely unstoppable</span> ‚Äî 
          a time when everything clicked and you KNEW you had this."
        </div>
      </div>
      
      <label class="question-label">Describe a moment when you felt powerful</label>
      
      <textarea 
        class="intention-input" 
        id="powerMoment"
        placeholder="It could be a big win or a small moment of clarity...

When did you feel most aligned, confident, or successful?"
        oninput="checkStep6()"
      ></textarea>
      
      <div class="power-moment-example">
        <strong>üí° Why this matters:</strong> This memory holds your success frequency. 
        We'll use it to anchor your manifestation in a proven pattern of your own power.
      </div>
      
      <div class="nav-buttons">
        <button class="btn btn-back" onclick="prevStep()">‚Üê Back</button>
        <button class="btn btn-next" id="step6Next" onclick="nextStep()" disabled>Continue ‚Üí</button>
      </div>
    </div>
    
    <!-- STEP 7: Timeline -->
    <div class="step" id="step-7">
      <div class="guide-message">
        <div class="guide-avatar">üåπ</div>
        <div class="guide-name">QUANTUM ROSE</div>
        <div class="guide-text">
          "Time is more flexible than you think. When do you feel this manifestation 
          <span class="highlight">wants to arrive</span>? Trust your intuition here."
        </div>
      </div>
      
      <label class="question-label">Choose your manifestation timeline</label>
      
      <div class="timeline-options">
        <div class="timeline-option" onclick="selectTimeline(this)" data-timeline="30">
          <div class="timeline-value">30</div>
          <div class="timeline-label">Days</div>
        </div>
        <div class="timeline-option" onclick="selectTimeline(this)" data-timeline="60">
          <div class="timeline-value">60</div>
          <div class="timeline-label">Days</div>
        </div>
        <div class="timeline-option" onclick="selectTimeline(this)" data-timeline="90">
          <div class="timeline-value">90</div>
          <div class="timeline-label">Days</div>
        </div>
        <div class="timeline-option" onclick="selectTimeline(this)" data-timeline="divine">
          <div class="timeline-value">‚àû</div>
          <div class="timeline-label">Divine Timing</div>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button class="btn btn-back" onclick="prevStep()">‚Üê Back</button>
        <button class="btn btn-next" id="step7Next" onclick="nextStep()" disabled>Continue ‚Üí</button>
      </div>
    </div>
    <div class="step" id="step-8">
      <div class="guide-message">
        <div class="guide-avatar">üßô</div>
        <div class="guide-name">QUANTUM MERLIN & ROSE</div>
        <div class="guide-text">
          "Your blueprint is <span class="highlight">complete</span>. 
          We have encoded your intention into the quantum field. 
          The Council has been assigned. <span class="highlight">Your reality is now shifting.</span>"
        </div>
      </div>
      
      <div class="blueprint-summary">
        <div class="blueprint-title">‚ö° YOUR MANIFESTATION BLUEPRINT ‚ö°</div>
        
        <div class="blueprint-section">
          <div class="blueprint-label">Domain</div>
          <div class="blueprint-value" id="summaryDomain">‚Äî</div>
        </div>
        
        <div class="blueprint-section">
          <div class="blueprint-label">Intention</div>
          <div class="blueprint-value" id="summaryIntention">‚Äî</div>
        </div>
        
        <div class="blueprint-section">
          <div class="blueprint-label">Emotional Frequency</div>
          <div class="blueprint-value" id="summaryEmotions">‚Äî</div>
        </div>
        
        <div class="blueprint-section">
          <div class="blueprint-label">Blocks to Clear</div>
          <div class="blueprint-value" id="summaryBlocks">‚Äî</div>
        </div>
        
        <div class="blueprint-section">
          <div class="blueprint-label">Timeline</div>
          <div class="blueprint-value" id="summaryTimeline">‚Äî</div>
        </div>
        
        <div class="quantum-code-preview">
          <div class="code-label">YOUR QUANTUM REALITY CODE</div>
          <div class="code-value" id="generatedCode">‚Äî</div>
          <div class="code-frequency" id="codeFrequency">Frequency: Calculating...</div>
        </div>
      </div>
      
      <div class="identity-statement">
        <div class="identity-label">YOUR NEW IDENTITY STATEMENT</div>
        <div class="identity-text" id="identityStatement">
          "I am someone who..."
        </div>
      </div>
      
      <div class="affirmation-box">
        <div class="affirmation-instruction">
          Speak this affirmation aloud to seal your quantum code:
        </div>
        <div class="affirmation-text" id="affirmationText">
          "I am already living in my manifested reality. The quantum field is rearranging to match my frequency."
        </div>
        <button class="speak-btn" id="speakBtn" onclick="toggleRecording()">
          üéôÔ∏è
        </button>
        <div style="text-align: center; font-size: 0.85rem; color: var(--text-secondary);">
          Tap to record yourself speaking it
        </div>
      </div>
      
      <p style="text-align: center; color: var(--neon-cyan); margin-top: 24px; font-size: 0.9rem;">
        Your personal council of 7 personas has been assigned based on your blueprint
      </p>
      
      <div class="council-preview" id="councilPreview">
        <!-- Dynamically populated -->
      </div>
      
      <div class="nav-buttons">
        <button class="btn btn-back" onclick="prevStep()">‚Üê Back</button>
        <button class="btn btn-next" onclick="activateBlueprint()">
          Activate Blueprint ‚ö°
        </button>
      </div>
    </div>
    
    <a href="index.html" class="home-link">‚Üê Back to Portal</a>
  </div>
  
  <script>
    console.log('Intention wizard script loaded');
    // State
    let currentStep = 0;
    const totalSteps = 8;
    
    const blueprint = {
      domain: null,
      domainLabel: '',
      specificOutcome: '',
      vision: '',
      emotions: [],
      obstacles: [],
      powerMoment: '',
      timeline: null,
      quantumCode: null
    };
    
    // Domain-specific suggestions
    const domainSuggestions = {
      abundance: [
        "I am earning $10,000/month consistently",
        "Money flows to me easily and unexpectedly",
        "I have multiple income streams working for me",
        "My bank account grows every single day"
      ],
      love: [
        "I am in a deeply fulfilling relationship",
        "I attract love that mirrors my energy",
        "My partner and I communicate with ease",
        "I feel completely loved and appreciated"
      ],
      career: [
        "I am working in my dream role",
        "My work impacts thousands of people",
        "I am recognized as a leader in my field",
        "I love what I do and get paid well for it"
      ],
      health: [
        "My body is strong, vital, and full of energy",
        "I wake up feeling refreshed every day",
        "I am at my ideal weight and feel amazing",
        "My mind is clear and focused"
      ],
      spiritual: [
        "I am deeply connected to my intuition",
        "I trust the universe completely",
        "I receive clear guidance every day",
        "I am at peace with myself and the world"
      ],
      confidence: [
        "I am confident in every situation",
        "I speak my truth without hesitation",
        "I trust my decisions completely",
        "I am worthy of everything I desire"
      ]
    };
    
    const domainLabels = {
      abundance: 'üí∞ Wealth & Abundance',
      love: 'üíï Love & Relationships',
      career: 'üöÄ Career & Purpose',
      health: 'üí™ Health & Vitality',
      spiritual: 'üßò Spiritual Growth',
      confidence: 'üëë Confidence & Identity'
    };
    
    const councilPersonas = [
      { icon: 'üîÆ', name: 'The Architect' },
      { icon: 'üìê', name: 'Metatron' },
      { icon: 'üìú', name: 'Thoth' },
      { icon: 'üéµ', name: 'Seraphina' },
      { icon: '‚ö°', name: 'Quasar' },
      { icon: 'üî¢', name: 'Leonardo' },
      { icon: 'üåà', name: 'Aurora' },
      { icon: 'üî•', name: 'Phoenix' },
      { icon: 'üåç', name: 'Atlas' },
      { icon: 'üåô', name: 'Luna' },
      { icon: '‚öîÔ∏è', name: 'Orion' },
      { icon: '‚ú®', name: 'Celeste' },
      { icon: 'ü™û', name: 'Echo' }
    ];
    
    // Step Labels
    const stepLabels = [
      'Getting Started',
      'Choose Your Domain',
      'Define Your Outcome',
      'Visualize Your Reality',
      'Emotional Frequency',
      'Clear Your Blocks',
      'Power Moment',
      'Timeline Selection',
      'Blueprint Complete!'
    ];
    
    // Navigation
    window.nextStep = function() {
      console.log('nextStep called, currentStep:', currentStep);
      alert('nextStep function is running! Current step: ' + currentStep);
      if (currentStep < totalSteps) {
        currentStep++;
        console.log('Moving to step:', currentStep);
        updateUI();
      } else {
        console.log('Already at final step');
      }
    }
    
    window.prevStep = function() {
      if (currentStep > 0) {
        currentStep--;
        updateUI();
      }
    }
    
    function updateUI() {
      // Hide all steps
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      
      // Show current step
      document.getElementById(`step-${currentStep}`).classList.add('active');
      
      // Update progress
      const progress = (currentStep / totalSteps) * 100;
      document.getElementById('progressFill').style.width = `${progress}%`;
      document.getElementById('stepLabel').textContent = stepLabels[currentStep];
      document.getElementById('stepCount').textContent = `Step ${currentStep} of ${totalSteps}`;
      
      // Special updates
      if (currentStep === 2) {
        updateOutcomeSuggestions();
      }
      if (currentStep === 8) {
        generateFinalBlueprint();
      }
    }
    
    // Domain Selection
    function selectDomain(card) {
      document.querySelectorAll('.domain-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      blueprint.domain = card.dataset.domain;
      blueprint.domainLabel = domainLabels[blueprint.domain];
      document.getElementById('step1Next').disabled = false;
    }
    
    // Outcome Suggestions
    function updateOutcomeSuggestions() {
      const chips = document.getElementById('outcomeChips');
      const suggestions = domainSuggestions[blueprint.domain] || [];
      chips.innerHTML = suggestions.map(s => 
        `<div class="suggestion-chip" onclick="usesuggestion(this)">${s}</div>`
      ).join('');
    }
    
    function usesuggestion(chip) {
      const textarea = document.getElementById('specificOutcome');
      textarea.value = chip.textContent;
      checkStep2();
    }
    
    function checkStep2() {
      const val = document.getElementById('specificOutcome').value.trim();
      document.getElementById('step2Next').disabled = val.length < 10;
      blueprint.specificOutcome = val;
      
      // Auto-reframe weak language
      autoReframe(val);
    }
    
    function autoReframe(text) {
      const reframeBox = document.getElementById('reframeBox');
      const weakPatterns = [
        { pattern: /I want to/gi, fix: "I have" },
        { pattern: /I wish to/gi, fix: "I am experiencing" },
        { pattern: /I hope to/gi, fix: "I know" },
        { pattern: /I need to/gi, fix: "I have" },
        { pattern: /I will/gi, fix: "I am now" },
        { pattern: /someday/gi, fix: "now" },
        { pattern: /try to/gi, fix: "" },
        { pattern: /maybe/gi, fix: "" },
        { pattern: /if only/gi, fix: "I am grateful that" },
        { pattern: /can't/gi, fix: "am learning to" }
      ];
      
      let reframed = text;
      let needsReframe = false;
      
      for (const {pattern, fix} of weakPatterns) {
        if (pattern.test(text)) {
          needsReframe = true;
          reframed = reframed.replace(pattern, fix);
        }
      }
      
      if (needsReframe && text.length > 10) {
        reframeBox.style.display = 'block';
        document.getElementById('reframeOriginal').textContent = text;
        document.getElementById('reframeNew').textContent = `‚ú® "${reframed}"`;
      } else {
        reframeBox.style.display = 'none';
      }
    }
    
    function checkStep3() {
      const val = document.getElementById('visionDetail').value.trim();
      document.getElementById('step3Next').disabled = val.length < 20;
      blueprint.vision = val;
    }
    
    // Emotion Tags
    function toggleEmotion(tag) {
      tag.classList.toggle('selected');
      const emotion = tag.textContent.trim();
      
      if (tag.classList.contains('selected')) {
        blueprint.emotions.push(emotion);
      } else {
        blueprint.emotions = blueprint.emotions.filter(e => e !== emotion);
      }
      
      document.getElementById('step4Next').disabled = blueprint.emotions.length === 0;
    }
    
    // Obstacles
    function toggleObstacle(item) {
      item.classList.toggle('selected');
      const obstacle = item.dataset.obstacle;
      
      if (item.classList.contains('selected')) {
        blueprint.obstacles.push(obstacle);
      } else {
        blueprint.obstacles = blueprint.obstacles.filter(o => o !== obstacle);
      }
    }
    
    function checkStep6() {
      const val = document.getElementById('powerMoment').value.trim();
      document.getElementById('step6Next').disabled = val.length < 10;
      blueprint.powerMoment = val;
    }
    
    // Timeline
    function selectTimeline(option) {
      document.querySelectorAll('.timeline-option').forEach(o => o.classList.remove('selected'));
      option.classList.add('selected');
      blueprint.timeline = option.dataset.timeline;
      document.getElementById('step7Next').disabled = false;
    }
    
    // Generate Final Blueprint
    function generateFinalBlueprint() {
      // Generate quantum code from intention
      blueprint.quantumCode = generateQuantumCode(blueprint.specificOutcome);
      
      // Populate summary
      document.getElementById('summaryDomain').textContent = blueprint.domainLabel;
      document.getElementById('summaryIntention').textContent = blueprint.specificOutcome;
      document.getElementById('summaryEmotions').textContent = blueprint.emotions.join(', ');
      document.getElementById('summaryBlocks').textContent = blueprint.obstacles.length > 0 
        ? blueprint.obstacles.join(', ').replace(/-/g, ' ')
        : 'No major blocks identified';
      document.getElementById('summaryTimeline').textContent = 
        blueprint.timeline === 'divine' ? '‚àû Divine Timing' : `${blueprint.timeline} days`;
      
      // Display code
      document.getElementById('generatedCode').textContent = blueprint.quantumCode;
      document.getElementById('codeFrequency').textContent = `Frequency: ${getCodeFrequency(blueprint.quantumCode)}`;
      
      // Generate identity statement
      const identity = generateIdentityStatement();
      document.getElementById('identityStatement').textContent = identity;
      
      // Generate affirmation
      document.getElementById('affirmationText').textContent = generateAffirmation();
      
      // Assign council
      assignCouncil();
    }
    
    function generateQuantumCode(text) {
      const frequencies = {
        'A': 432, 'B': 480, 'C': 528, 'D': 576, 'E': 639, 'F': 693, 'G': 741,
        'H': 768, 'I': 852, 'J': 888, 'K': 936, 'L': 963, 'M': 1008, 'N': 1044,
        'O': 1111, 'P': 1152, 'Q': 1188, 'R': 1212, 'S': 1248, 'T': 1296, 'U': 1332,
        'V': 1368, 'W': 1404, 'X': 1440, 'Y': 1476, 'Z': 1512
      };
      
      let sum = 0;
      for (const char of text.toUpperCase()) {
        if (frequencies[char]) {
          sum += frequencies[char];
        }
      }
      
      // Create sacred code
      const base = sum % 999999;
      const prefix = ['QM', 'QR', 'Œ©Œ¶', 'Œ®Œû'][Math.floor(Math.random() * 4)];
      return `${prefix}-${base.toString().padStart(6, '0')}`;
    }
    
    function getCodeFrequency(code) {
      const num = parseInt(code.split('-')[1]) || 0;
      const freq = (num % 888) + 432;
      return `${freq}Hz (${getFrequencyName(freq)})`;
    }
    
    function getFrequencyName(freq) {
      if (freq >= 528) return 'Miracle Frequency';
      if (freq >= 432) return 'Universal Harmony';
      return 'Quantum Resonance';
    }
    
    function generateIdentityStatement() {
      const domain = blueprint.domain;
      const statements = {
        abundance: `I am a powerful creator of wealth. Money flows to me effortlessly because I am worthy of abundance.`,
        love: `I am deeply loved and I attract beautiful relationships that honor my worth.`,
        career: `I am a leader in my purpose. My work matters and I am recognized for my gifts.`,
        health: `I am vibrant, healthy, and full of energy. My body is a temple of vitality.`,
        spiritual: `I am connected to infinite wisdom. The universe guides me perfectly.`,
        confidence: `I am confident, powerful, and worthy. I trust myself completely.`
      };
      return statements[domain] || 'I am already the person who has what I desire.';
    }
    
    function generateAffirmation() {
      return `"I release ${blueprint.obstacles[0] || 'all blocks'} and step fully into ${blueprint.emotions[0] || 'my power'}. ${blueprint.specificOutcome}. This is already my reality."`;
    }
    
    function assignCouncil() {
      // Select 7 personas based on blueprint
      const selectedPersonas = [];
      const shuffled = [...councilPersonas].sort(() => Math.random() - 0.5);
      
      for (let i = 0; i < 7; i++) {
        selectedPersonas.push(shuffled[i]);
      }
      
      const preview = document.getElementById('councilPreview');
      preview.innerHTML = selectedPersonas.map(p => `
        <div class="council-member-mini">
          <div class="council-avatar-mini">${p.icon}</div>
          <div class="council-name-mini">${p.name}</div>
        </div>
      `).join('');
    }
    
    // Recording (simulated)
    function toggleRecording() {
      const btn = document.getElementById('speakBtn');
      btn.classList.toggle('recording');
      
      if (btn.classList.contains('recording')) {
        setTimeout(() => {
          btn.classList.remove('recording');
          btn.innerHTML = '‚úÖ';
          setTimeout(() => btn.innerHTML = 'üéôÔ∏è', 2000);
        }, 3000);
      }
    }
  </script>
  
  <style>
    /* ============================================
       MOBILE RESPONSIVE DESIGN
    ============================================ */
    
    /* Mobile enhancements */
    .quantum-input:focus,
    .quantum-textarea:focus {
      font-size: 16px; /* Prevent zoom on iOS */
      outline: 2px solid var(--neon-cyan);
      outline-offset: 2px;
    }

    .option-card,
    .emotion-card,
    .nav-btn,
    .activate-btn {
      touch-action: manipulation;
      -webkit-tap-highlight-color: rgba(0, 245, 255, 0.2);
    }

    .quantum-textarea {
      -webkit-overflow-scrolling: touch;
    }

    .quantum-textarea::-webkit-scrollbar {
      display: none;
    }
    
    @media (max-width: 640px) {
        max-width: 100%;
        margin: 0;
        padding: 16px;
        min-height: calc(100vh - 32px);
      }

      .wizard-header {
        padding: 16px 0 12px;
        position: sticky;
        top: 0;
        z-index: 10;
        backdrop-filter: blur(10px);
        background: rgba(10, 10, 15, 0.9);
        margin: -20px -20px 24px;
        border-radius: 0 0 16px 16px;
        padding-top: 20px;
      }

      .wizard-header h1 {
        font-size: 1.4rem;
        margin-bottom: 6px;
      }

      .wizard-header p {
        font-size: 0.85rem;
        max-width: 300px;
        margin: 0 auto;
      }

      .progress-container {
        margin-bottom: 24px;
      }

      .step-container {
        padding: 20px;
        border-radius: 16px;
      }

      .step-header h2 {
        font-size: 1.3rem;
        margin-bottom: 12px;
      }

      .step-description {
        font-size: 16px;
        line-height: 1.5;
        margin-bottom: 20px;
      }

      .input-group {
        margin-bottom: 20px;
      }

      .input-group label {
        font-size: 16px;
        margin-bottom: 8px;
        display: block;
      }

      .quantum-input,
      .quantum-textarea {
        font-size: 16px;
        padding: 14px 16px;
        border-radius: 12px;
        min-height: 48px;
      }

      .quantum-textarea {
        min-height: 120px;
        resize: vertical;
      }

      .option-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .option-card {
        padding: 16px;
        border-radius: 12px;
        min-height: 60px;
        display: flex;
        align-items: center;
        font-size: 16px;
        touch-action: manipulation;
      }

      .option-card.selected {
        transform: scale(1.02);
      }

      .option-card:active {
        transform: scale(0.98);
      }

      .emotion-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .emotion-card {
        padding: 14px;
        border-radius: 12px;
        text-align: center;
        font-size: 14px;
        min-height: 70px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        touch-action: manipulation;
      }

      .emotion-emoji {
        font-size: 24px;
        margin-bottom: 6px;
      }

      .emotion-name {
        font-size: 13px;
        font-weight: 500;
      }

      .navigation-buttons {
        flex-direction: column;
        gap: 12px;
        margin-top: 24px;
      }

      .nav-btn {
        width: 100%;
        padding: 16px;
        font-size: 16px;
        min-height: 52px;
        border-radius: 12px;
        touch-action: manipulation;
      }

      .nav-btn:active {
        transform: scale(0.98);
      }

      .step-indicator {
        padding: 12px 16px;
        font-size: 14px;
      }

      .blueprint-summary {
        padding: 20px;
        border-radius: 16px;
      }

      .summary-section h3 {
        font-size: 1.2rem;
        margin-bottom: 12px;
      }

      .summary-item {
        padding: 12px;
        border-radius: 10px;
        margin-bottom: 8px;
        font-size: 14px;
      }

      .quantum-code-display {
        padding: 20px;
        border-radius: 16px;
        margin: 20px 0;
      }

      .code-label {
        font-size: 16px;
        margin-bottom: 12px;
      }

      .code-value {
        font-size: 28px;
        margin-bottom: 16px;
      }

      .code-properties {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .code-property {
        padding: 12px;
        border-radius: 10px;
        text-align: center;
      }

      .code-property .label {
        font-size: 12px;
        margin-bottom: 4px;
      }

      .code-property .value {
        font-size: 16px;
      }

      .activate-btn {
        width: 100%;
        padding: 18px;
        font-size: 16px;
        min-height: 56px;
        border-radius: 12px;
        margin-top: 20px;
      }

      /* Safe area support */
      .container {
        padding-top: max(16px, env(safe-area-inset-top, 0px));
        padding-bottom: max(16px, env(safe-area-inset-bottom, 0px));
        padding-left: max(16px, env(safe-area-inset-left, 0px));
        padding-right: max(16px, env(safe-area-inset-right, 0px));
      }
    }

    /* Small mobile devices */
    @media (max-width: 480px) {
      .container {
        padding: 12px;
      }

      .wizard-header {
        padding: 20px 0 16px;
      }

      .wizard-header h1 {
        font-size: 1.3rem;
      }

      .wizard-header p {
        font-size: 0.85rem;
      }

      .step-container {
        padding: 16px;
      }

      .step-header h2 {
        font-size: 1.2rem;
      }

      .step-description {
        font-size: 15px;
        margin-bottom: 16px;
      }

      .input-group {
        margin-bottom: 16px;
      }

      .input-group label {
        font-size: 15px;
      }

      .quantum-input,
      .quantum-textarea {
        padding: 12px 14px;
        font-size: 15px;
      }

      .quantum-textarea {
        min-height: 100px;
      }

      .option-grid {
        gap: 10px;
      }

      .option-card {
        padding: 14px;
        min-height: 56px;
        font-size: 15px;
      }

      .emotion-grid {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .emotion-card {
        padding: 12px;
        min-height: 65px;
      }

      .emotion-emoji {
        font-size: 22px;
        margin-bottom: 4px;
      }

      .emotion-name {
        font-size: 12px;
      }

      .navigation-buttons {
        gap: 10px;
        margin-top: 20px;
      }

      .nav-btn {
        padding: 14px;
        font-size: 15px;
        min-height: 48px;
      }

      .step-indicator {
        padding: 10px 14px;
        font-size: 13px;
      }

      .blueprint-summary {
        padding: 16px;
      }

      .summary-section h3 {
        font-size: 1.1rem;
        margin-bottom: 10px;
      }

      .summary-item {
        padding: 10px;
        font-size: 13px;
      }

      .quantum-code-display {
        padding: 16px;
        margin: 16px 0;
      }

      .code-label {
        font-size: 15px;
      }

      .code-value {
        font-size: 24px;
        margin-bottom: 12px;
      }

      .code-properties {
        gap: 10px;
      }

      .code-property {
        padding: 10px;
      }

      .activate-btn {
        padding: 16px;
        font-size: 15px;
        min-height: 52px;
        margin-top: 16px;
      }
    }

    /* Landscape mobile optimization */
    @media (max-width: 896px) and (max-height: 500px) {
      .container {
        padding: 8px;
      }

      .wizard-header {
        padding: 12px 0 8px;
      }

      .wizard-header h1 {
        font-size: 1.2rem;
      }

      .step-container {
        padding: 12px;
      }

      .option-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .emotion-grid {
        grid-template-columns: repeat(3, 1fr);
      }

      .navigation-buttons {
        flex-direction: row;
        gap: 12px;
      }

      .nav-btn {
        flex: 1;
      }
    }
    function activateBlueprint() {
      // Save to localStorage
      localStorage.setItem('quantum_blueprint', JSON.stringify(blueprint));
      localStorage.setItem('quantum_code', blueprint.quantumCode);
      localStorage.setItem('quantum_intention', blueprint.specificOutcome);
      
      // Redirect to main app
      window.location.href = `index.html?activated=true&code=${blueprint.quantumCode}`;
    }
    
    // Initialize
    console.log('Initializing intention wizard...');
    console.log('Button element:', document.querySelector('.btn-next'));
    updateUI();
    console.log('Initialization complete');
  </script>
</body>
</html>